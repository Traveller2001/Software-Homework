# 一、PSP表格

![psp表格](https://pic.imgdb.cn/item/6328a0d516f2c2beb10c358b.png)

# 二、任务要求的实现
## 2.1 
我将之分为了7个环节，确定所需相关技术与知识，学习相关技术与知识，进行程序的大体架构，编写爬虫程序，进行数据分析与提取，进行数据可视化的实现，完成测试。 第一，确定所需相关技术可以从别人的博客中了解到，同时根据自己的需求选择急需学习的相关技术。第二，学习相关技术与知识这一环节，我通过查找各种技术的官网以及菜鸟教程，尚硅谷教程和黑马程序员等网站与教学视频来进行学习。第三，进行程序的大体架构首先先确定自己想要完成的程度以及目标，其次，找一些成熟的项目来借鉴大体的架构。第四，编写爬虫程序我是在学习完大体的技术后开始进行的，在过程中边遇到问题边解决，嘴巴和百度是个好东西，遇到难题就问就查。第五，进行数据提取，我是通过分析每一页疫情通报的格式后才开始做的，因为这个网站真的奇葩，经常格式会不一样。第六，进行数据可视化的实现，我通过copy了我以前在vue项目中用过的echarts的柱形图和线型图，同时在github上找了别人做的echarts的中国地图，通过修改，换成了疫情的分布图，但很可惜，因为最近很忙，动态的可视化来不及实现。第七，测试我是百度了一个测试工具就直接用了。技术栈上，我用了requests，xpath，lxml，re，vue，echarts，element ui等。

## 2.2
我先爬取并提取了疫情通报四十几页中的链接将之存于数组，再通过循环，爬取一个一个链接对应的网页的数据，并通过xpath和lxml解析每一页我们所需的数据提取出来，同时为了后面数据的客观性，我还专门将发文时间爬取出来，最后，我又设计了一个函数专门用来计算每日港澳台新增确诊人数。将所有所需数据爬出来后再将之导入到excel。我总的设计了12个函数，只有一个类。
> ![解析关键函数](https://pic.imgdb.cn/item/6329a8dd16f2c2beb1f0f07c.png)
> 在这个获取各省市确诊病例的函数中，我先将各省市名字的列表通过函数转化成又由一个个键值对构成的字典，每一个键值对的值都是0，这便于之后提取出新增的省市后存储，我先通过各种不同形式的正则表达式来提取数据，在存入city_list1时我专门做了个判断，因为在上海疫情那段期间，通报中会写到区级单位的情况，但这我们是不需要的，所以先判断提取到的数据是不是34个我们所需的省市的数据，若不是就忽略。最终将所得到的字典存入另一个大字典。其它的几个函数都是大同小异，只有正则比较不同，在此就不赘述。

## 2.3
![测试1](https://pic.imgdb.cn/item/6329c40116f2c2beb10f4849.png)
![测试2](https://pic.imgdb.cn/item/6329c40116f2c2beb10f4838.png)
改进的思路：尽可能减少循环的次数
> 时间最长的函数
>![解析关键函数](https://pic.imgdb.cn/item/6329a8dd16f2c2beb1f0f07c.png))
## 2.4
每日热点的实现并没有用什么特别智能的算法，只是通过赋权来筛选当天最值得关注的事件，首先就是把每日新增，每日无症状，各省市新增，各省市无症状进行一个权重的赋值，实现比如在每日新增量巨大的时候，就会查找是否有城市确诊人数占了大部分，若有根据权值计算就会将热点设为某省份新增人数，否则就是整体的当日新增人数作为热点。其它的情况也是如此，若是每日新增与每日无症状人数差不多时，因为每日新增的权重比较大，所以热点会设为每日新增人数。

## 2.5
![可视化](https://pic.imgdb.cn/item/6329af8516f2c2beb1f86c9f.png)
我用vue技术进行了一个网页的搭建，并将三幅由echarts构成的图建成一个个组件，分模块作业，使之更好管理，最终集成到主页面上。我的组件就是一个柱形图，一个曲线图，一个由地图实现的疫情分布图。通过柱形图是更为直观地让读者看到今日的主要新增城市是谁，而七天趋势则更能反映出近期全国疫情的情况，来让人们时刻的知道疫情情况并不乐观，而疫情分布地图则是更可以全方位体现中国疫情的分布情况，同时更为直观，视觉更为震撼。同时我通过了flex布局等方式让可视化大屏观感更为舒服。若要运行，请将整个文件夹加入到vscode中，在终端下输入npm run dev
# 三、心得体会
本次作业说难也并不是特别难，但问题在于有一些步骤特别的浪费时间，需要耗费很大地精力来进行调试，当然，还有一些以前知道但是运用不太熟练的技术也需要不少的时间进行学习。并且非常不幸的是，这两周事情堆成山，除了软工的作业，还有linux的编程，sdn的实践再加上撞车的数学建模，这两周真的让人emo。我看到了好几天凌晨4点的福州，经历了好几天的不眠之夜。不过，值得一说，这次的作业还是让人有些收获的，除了累点，倒也没什么，本次作业到此就告一段落，可以补觉了。